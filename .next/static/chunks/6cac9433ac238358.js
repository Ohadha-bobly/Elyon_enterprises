(globalThis.TURBOPACK||(globalThis.TURBOPACK=[])).push(["object"==typeof document?document.currentScript:void 0,69298,e=>{"use strict";var s=e.i(41627),a=e.i(38989),t=e.i(36722),l=e.i(14264);function n(){let[e,n]=(0,a.useState)([]),[c,i]=(0,a.useState)(!0),[r,d]=(0,a.useState)(null),[m,o]=(0,a.useState)("");(0,a.useEffect)(()=>{x()},[]);let x=async()=>{try{let e=await fetch("/api/sms/templates"),s=await e.json();n(s.data||[])}catch(e){console.error("Error fetching templates:",e)}finally{i(!1)}},h=async e=>{try{(await fetch("/api/sms/templates",{method:"PUT",headers:{"Content-Type":"application/json"},body:JSON.stringify({id:e,message_content:m})})).ok&&(alert("Template saved successfully!"),d(null),x())}catch(e){console.error("Error saving template:",e)}};return(0,s.jsxs)("div",{className:"space-y-6",children:[(0,s.jsx)("h1",{className:"text-3xl font-bold",children:"SMS Templates"}),c?(0,s.jsx)("p",{children:"Loading templates..."}):(0,s.jsx)("div",{className:"space-y-4",children:e.map(e=>(0,s.jsxs)(l.Card,{className:"p-6",children:[(0,s.jsxs)("div",{className:"mb-4",children:[(0,s.jsx)("h3",{className:"text-lg font-semibold",children:e.name}),(0,s.jsxs)("p",{className:"text-sm text-muted-foreground",children:["Key: ",e.template_key]})]}),r===e.id?(0,s.jsxs)("div",{className:"space-y-4",children:[(0,s.jsx)("textarea",{className:"w-full p-3 border rounded-md font-mono text-sm",rows:6,value:m,onChange:e=>o(e.target.value)}),(0,s.jsxs)("div",{className:"flex gap-2",children:[(0,s.jsx)(t.Button,{onClick:()=>h(e.id),className:"bg-green-600 hover:bg-green-700",children:"Save Changes"}),(0,s.jsx)(t.Button,{variant:"outline",onClick:()=>d(null),children:"Cancel"})]})]}):(0,s.jsxs)("div",{className:"space-y-4",children:[(0,s.jsx)("div",{className:"p-4 bg-muted rounded-md",children:(0,s.jsx)("p",{className:"text-sm whitespace-pre-wrap",children:e.message_content})}),e.variables_used.length>0&&(0,s.jsxs)("div",{className:"text-sm",children:[(0,s.jsx)("p",{className:"font-medium mb-2",children:"Variables:"}),(0,s.jsx)("div",{className:"flex flex-wrap gap-2",children:e.variables_used.map(e=>(0,s.jsx)("code",{className:"bg-blue-100 text-blue-900 px-2 py-1 rounded text-xs",children:"{"+e+"}"},e))})]}),(0,s.jsxs)("div",{className:"flex justify-between items-center",children:[(0,s.jsx)("span",{className:`text-xs px-2 py-1 rounded ${e.is_active?"bg-green-100 text-green-800":"bg-gray-100 text-gray-800"}`,children:e.is_active?"Active":"Inactive"}),(0,s.jsx)(t.Button,{variant:"outline",onClick:()=>{d(e.id),o(e.message_content)},children:"Edit Template"})]})]})]},e.id))}),(0,s.jsxs)(l.Card,{className:"p-6 bg-blue-50",children:[(0,s.jsx)("h3",{className:"font-semibold mb-3",children:"Variable Reference"}),(0,s.jsxs)("div",{className:"grid md:grid-cols-2 gap-2 text-sm",children:[(0,s.jsxs)("p",{children:[(0,s.jsx)("code",{children:"{customer_name}"})," - User first name"]}),(0,s.jsxs)("p",{children:[(0,s.jsx)("code",{children:"{amount}"})," - Transaction amount"]}),(0,s.jsxs)("p",{children:[(0,s.jsx)("code",{children:"{expiry_date}"})," - Subscription end date"]}),(0,s.jsxs)("p",{children:[(0,s.jsx)("code",{children:"{company_name}"})," - ISP company name"]})]})]})]})}e.s(["default",()=>n])}]);